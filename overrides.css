.app-sidebar,
.app-sidebar-inner {
    background-color: var(--sidebar-bg, #ffffff) !important;
    color: var(--nav-text-color, #111827) !important;
    /* neutral text */
    font-family: var(--app-font-family, Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial) !important;
}

/* Ensure any Materialize 'pink' or 'red' classes inside sidebar do not apply */
.app-sidebar .pink,
.app-sidebar .pink.lighten-1,
.app-sidebar .pink.lighten-2,
.app-sidebar .red,
.app-sidebar .red.lighten-1,
.app-sidebar .red.lighten-2 {
    background-color: transparent !important;
    color: inherit !important;
}

/* Override active link backgrounds that might be set by other libraries */
.app-sidebar a,
.app-sidebar .group {
    background-color: transparent !important;
    color: inherit !important;
}

/* Specific override for Tailwind utility classes that may set bg-primary-50/text-primary-600
   Convert active background to white and active text to primary-dark (or black) */
.app-sidebar .bg-primary-50 {
    background-color: var(--sidebar-bg, #ffffff) !important;
}

.app-sidebar .text-primary-600 {
    color: var(--nav-text-color, #111827) !important;
}

/* Remove any box-shadow or tint added by Materialize components */
.app-sidebar * {
    box-shadow: none !important;
    filter: none !important;
    background-image: none !important;
}

:root {
    --primary-color: #3b82f6;
    --sidebar-bg: #ffffff;
    --nav-text-color: #111827;
    --logo-color: #111827;
    --app-text-color: #111827;
    --app-font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* Ensure inputs and editor content default to left-to-right to avoid accidental RTL rendering */
input,
textarea,
select,
.canvas-editor,
.tox,
.tox-editor-container,
.tox .tox-edit-area,
.tox .tox-edit-area iframe {
    direction: ltr !important;
    text-align: left !important;
}

/* Example usage: buttons and links can use --primary-color */
.btn-primary,
.text-primary {
    background-color: var(--primary-color) !important;
    color: white !important;
}

/* Force navbar/header/nav wrapper backgrounds to use the configured navbar background */
header,
nav,
.nav-wrapper,
.navbar,
.app-topnav {
    background-color: var(--navbar-bg, var(--primary-color)) !important;
    color: var(--nav-text-color, #ffffff) !important;
}

/* Ensure brand/logo area respects uploaded logo or text */
.brand-logo,
.app-logo {
    color: var(--logo-color) !important;
}

/* If Materialize adds a .pink or .red class to a nav, override it inside header/nav */
header .pink,
header .red,
nav .pink,
nav .red {
    background-color: var(--navbar-bg, #ffffff) !important;
    color: var(--nav-text-color, #111827) !important;
}

/* Leaflet popup (scoped to our map): allow width to grow to fit inner content and avoid clipping/overflow.
   These rules only apply to popups inside `.nherams-map` to avoid affecting other Leaflet instances. */
.nherams-map .leaflet-popup,
.nherams-map .leaflet-container .leaflet-popup-pane {
    width: auto !important;
    max-width: 95vw !important;
    box-sizing: border-box !important;
}

.nherams-map .leaflet-popup-content-wrapper {
    display: inline-flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    width: auto !important;
    max-width: 95vw !important;
    box-sizing: border-box !important;
    padding: 8px !important;
}

.nherams-map .leaflet-popup-tip-container,
.nherams-map .leaflet-popup-tip {
    width: auto !important;
}

.nherams-map .leaflet-popup-content {
    white-space: normal !important;
    overflow-wrap: break-word !important;
    word-break: break-word !important;
    width: auto !important;
    max-width: 95vw !important;
    max-height: 70vh !important;
    overflow-y: auto !important;
}

/* Ensure large inner elements (tables, pre, code blocks) inside our map popups don't force overflow
   beyond the popup: make them responsive within the popup. */
.nherams-map .leaflet-popup-content table,
.nherams-map .leaflet-popup-content pre,
.nherams-map .leaflet-popup-content code,
.nherams-map .leaflet-popup-content .card {
    max-width: 100% !important;
    overflow: auto !important;
}

/* Ensure map popups render above all other app elements and that inner
   popup children inherit the same stacking context so content is never hidden. */
.nherams-map .leaflet-popup,
.nherams-map .leaflet-container .leaflet-popup-pane,
.nherams-map .leaflet-pane,
.nherams-map .leaflet-pane * {
    z-index: 2147483647 !important;
}

.nherams-map .leaflet-popup-content-wrapper,
.nherams-map .leaflet-popup-tip-container,
.nherams-map .leaflet-popup-tip,
.nherams-map .leaflet-popup-content {
    z-index: 2147483647 !important;
    position: relative !important;
}

.nherams-map .leaflet-popup-content * {
    z-index: 2147483647 !important;
}

/* Materialize-like input styles scoped to modals
   Applies a bottom-border input style and focused accent similar to Materialize CSS
   Targeting inputs inside the modal container added in `components/ui/Modal.tsx`. */
.materialize-modal input,
.materialize-modal textarea,
.materialize-modal select {
    border: none !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.42) !important;
    background: transparent !important;
    padding: 0.5rem 0 0.25rem !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    transition: border-color .15s ease, box-shadow .15s ease, color .15s ease !important;
}

.materialize-modal label {
    color: rgba(0, 0, 0, 0.65) !important;
    font-size: 0.95rem !important;
    display: block !important;
    margin-bottom: 0.25rem !important;
}

.materialize-modal input:focus,
.materialize-modal textarea:focus,
.materialize-modal select:focus {
    outline: none !important;
    border-bottom-color: var(--primary-color, #3b82f6) !important;
    box-shadow: 0 1px 0 0 var(--primary-color, #3b82f6) !important;
}

.materialize-modal .file-input,
.materialize-modal input[type="file"] {
    border-bottom: none !important;
}

/* Small helper for inputs that already have surrounding label after the input (Materialize pattern).
   If a label immediately follows an input, shrink it when input has a value or is focused. */
.materialize-modal input:focus+label,
.materialize-modal input:not(:placeholder-shown)+label,
.materialize-modal textarea:focus+label,
.materialize-modal textarea:not(:placeholder-shown)+label {
    transform: translateY(-0.9rem) scale(0.86) !important;
    color: var(--primary-color, #3b82f6) !important;
}